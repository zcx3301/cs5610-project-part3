{"ast":null,"code":"var _jsxFileName = \"/Users/zcx/Desktop/cs5610 final_project3 2/client/src/components/ProductsList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { fetchPostWithAuth } from \"../security/fetchWithAuth\";\nimport \"../style/productsList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductsList() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [message, setMessage] = useState(\"\");\n\n  // useEffect(() => {\n  //   const fetchProducts = async () => {\n  //     try {\n  //       const data = await fetchGetWithAuth(`${process.env.REACT_APP_API_URL}/products`);\n  //       setProducts(data);\n  //     } catch (error) {\n  //       console.error(\"Error fetching products:\", error);\n  //     }\n  //   };\n  //   fetchProducts();\n  // }, []);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        // Using a public fetch method to get products without authentication\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/products`);\n        if (response.ok) {\n          const data = await response.json();\n          setProducts(data);\n        } else {\n          console.error(\"Failed to fetch products\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const handleAddToCart = async productId => {\n    try {\n      const response = await fetchPostWithAuth(`${process.env.REACT_APP_API_URL}/cart`, {\n        productId,\n        quantity: 1\n      });\n      if (response.ok) {\n        setMessage(\"Product added to cart successfully!\");\n      } else {\n        setMessage(\"Failed to add product to cart.\");\n      }\n    } catch (error) {\n      console.error(\"Error adding product to cart:\", error);\n      setMessage(\"An error occurred while adding product to cart.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"products-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Products\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"message\",\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"product-list-container\",\n      children: products.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"product-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-name\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"product-price\",\n            children: [\" - $\", product.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-to-cart-button\",\n          onClick: () => handleAddToCart(product.id),\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 13\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductsList, \"6uHT29bGh1AHUv4m+zgMIpk5mos=\");\n_c = ProductsList;\nvar _c;\n$RefreshReg$(_c, \"ProductsList\");","map":{"version":3,"names":["React","useEffect","useState","fetchPostWithAuth","jsxDEV","_jsxDEV","ProductsList","_s","products","setProducts","message","setMessage","fetchProducts","response","fetch","process","env","REACT_APP_API_URL","ok","data","json","console","error","handleAddToCart","productId","quantity","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","product","name","price","onClick","id","_c","$RefreshReg$"],"sources":["/Users/zcx/Desktop/cs5610 final_project3 2/client/src/components/ProductsList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { fetchPostWithAuth } from \"../security/fetchWithAuth\";\nimport \"../style/productsList.css\"; \n\nexport default function ProductsList() {\n  const [products, setProducts] = useState([]);\n  const [message, setMessage] = useState(\"\");\n\n  // useEffect(() => {\n  //   const fetchProducts = async () => {\n  //     try {\n  //       const data = await fetchGetWithAuth(`${process.env.REACT_APP_API_URL}/products`);\n  //       setProducts(data);\n  //     } catch (error) {\n  //       console.error(\"Error fetching products:\", error);\n  //     }\n  //   };\n  //   fetchProducts();\n  // }, []);\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        // Using a public fetch method to get products without authentication\n        const response = await fetch(`${process.env.REACT_APP_API_URL}/products`);\n        if (response.ok) {\n          const data = await response.json();\n          setProducts(data);\n        } else {\n          console.error(\"Failed to fetch products\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  const handleAddToCart = async (productId) => {\n    try {\n      const response = await fetchPostWithAuth(`${process.env.REACT_APP_API_URL}/cart`, {\n        productId,\n        quantity: 1,\n      });\n      if (response.ok) {\n        setMessage(\"Product added to cart successfully!\");\n      } else {\n        setMessage(\"Failed to add product to cart.\");\n      }\n    } catch (error) {\n      console.error(\"Error adding product to cart:\", error);\n      setMessage(\"An error occurred while adding product to cart.\");\n    }\n  };\n\n  return (\n    <div className=\"products-list\">\n      <h1>Products</h1>\n      {message && <p className=\"message\">{message}</p>}\n      <ul className=\"product-list-container\">\n        {products.map((product) => (\n          <li key={product.id} className=\"product-item\">\n            <div className=\"product-info\">\n              <span className=\"product-name\">{product.name}</span>\n              <span className=\"product-price\"> - ${product.price}</span>\n            </div>\n            <button\n              className=\"add-to-cart-button\"\n              onClick={() => handleAddToCart(product.id)}\n            >\n              Add to Cart\n            </button>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}