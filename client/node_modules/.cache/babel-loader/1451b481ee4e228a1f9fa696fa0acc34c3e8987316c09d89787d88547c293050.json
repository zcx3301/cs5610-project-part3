{"ast":null,"code":"var _jsxFileName = \"/Users/zcx/Desktop/final_project_part3/client/src/components/ProductSearch.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport \"../style/product-search.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductSearch() {\n  _s();\n  const [query, setQuery] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const fetchProducts = async () => {\n    if (!query) return;\n    setLoading(true);\n    setError(\"\");\n    const apiKey = process.env.REACT_APP_AMAZON_API_KEY;\n    const apiHost = process.env.REACT_APP_AMAZON_API_HOST;\n    try {\n      const response = await fetch(`https://${apiHost}/search?query=${encodeURIComponent(query)}`, {\n        method: \"GET\",\n        headers: {\n          \"x-rapidapi-key\": apiKey,\n          \"x-rapidapi-host\": apiHost\n        }\n      });\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Fetched Products:\", JSON.stringify(data, null, 2)); // 打印获取到的数据，检查数据结构\n\n        // 根据返回的数据结构进行适配\n        if (data && data.products) {\n          setProducts(data.products);\n        } else if (data && data.data && data.data.products) {\n          setProducts(data.data.products);\n        } else {\n          console.warn(\"Unexpected data structure:\", data);\n          setProducts([]);\n        }\n      } else {\n        setError(\"Failed to fetch products\");\n        console.error(\"Failed to fetch products\", response.statusText);\n      }\n    } catch (error) {\n      setError(\"An error occurred while fetching products.\");\n      console.error(\"Error fetching products:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product-search\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Amazon Product Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: query,\n      onChange: e => setQuery(e.target.value),\n      placeholder: \"Enter product keyword\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchProducts,\n      disabled: loading,\n      children: loading ? \"Searching...\" : \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: \"red\"\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: products.length > 0 ? products.map((product, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: product.product_url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: [product.product_photo ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: product.product_photo,\n            alt: product.product_title || \"Product Image\",\n            style: {\n              width: \"100px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No image available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: product.product_title || \"No Title Available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Price: \", product.product_price ? `$${product.product_price}` : \"N/A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 15\n        }, this)]\n      }, product.asin || product.id || index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)) : !loading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No products found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 23\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductSearch, \"qzcECHsOZ9yGtc1pAgTIXR3dpEg=\");\n_c = ProductSearch;\nvar _c;\n$RefreshReg$(_c, \"ProductSearch\");","map":{"version":3,"names":["React","useState","jsxDEV","_jsxDEV","ProductSearch","_s","query","setQuery","products","setProducts","loading","setLoading","error","setError","fetchProducts","apiKey","process","env","REACT_APP_AMAZON_API_KEY","apiHost","REACT_APP_AMAZON_API_HOST","response","fetch","encodeURIComponent","method","headers","ok","data","json","console","log","JSON","stringify","warn","statusText","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","onClick","disabled","style","color","length","map","product","index","href","product_url","rel","product_photo","src","alt","product_title","width","product_price","asin","id","_c","$RefreshReg$"],"sources":["/Users/zcx/Desktop/final_project_part3/client/src/components/ProductSearch.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"../style/product-search.css\";\n\nexport default function ProductSearch() {\n  const [query, setQuery] = useState(\"\");\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  const fetchProducts = async () => {\n    if (!query) return;\n\n    setLoading(true);\n    setError(\"\");\n\n    const apiKey = process.env.REACT_APP_AMAZON_API_KEY;\n    const apiHost = process.env.REACT_APP_AMAZON_API_HOST;\n\n    try {\n      const response = await fetch(\n        `https://${apiHost}/search?query=${encodeURIComponent(query)}`,\n        {\n          method: \"GET\",\n          headers: {\n            \"x-rapidapi-key\": apiKey,\n            \"x-rapidapi-host\": apiHost,\n          },\n        }\n      );\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Fetched Products:\", JSON.stringify(data, null, 2)); // 打印获取到的数据，检查数据结构\n\n        // 根据返回的数据结构进行适配\n        if (data && data.products) {\n          setProducts(data.products);\n        } else if (data && data.data && data.data.products) {\n          setProducts(data.data.products);\n        } else {\n          console.warn(\"Unexpected data structure:\", data);\n          setProducts([]);\n        }\n      } else {\n        setError(\"Failed to fetch products\");\n        console.error(\"Failed to fetch products\", response.statusText);\n      }\n    } catch (error) {\n      setError(\"An error occurred while fetching products.\");\n      console.error(\"Error fetching products:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"product-search\">\n      <h1>Amazon Product Search</h1>\n      <input\n        type=\"text\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Enter product keyword\"\n      />\n      <button onClick={fetchProducts} disabled={loading}>\n        {loading ? \"Searching...\" : \"Search\"}\n      </button>\n\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n\n      <ul>\n        {products.length > 0 ? (\n          products.map((product, index) => (\n            <li key={product.asin || product.id || index}>\n              <a\n                href={product.product_url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {product.product_photo ? (\n                  <img\n                    src={product.product_photo}\n                    alt={product.product_title || \"Product Image\"}\n                    style={{ width: \"100px\" }}\n                  />\n                ) : (\n                  <p>No image available</p>\n                )}\n                <h3>{product.product_title || \"No Title Available\"}</h3>\n              </a>\n              <p>\n                Price: {product.product_price ? `$${product.product_price}` : \"N/A\"}\n              </p>\n            </li>\n          ))\n        ) : (\n          !loading && <p>No products found.</p>\n        )}\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}